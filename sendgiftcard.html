<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deniz Bank - Send Gift Card</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts: Roboto and Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #f0f2f5, #e0e7ff);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }
    .header {
      background: linear-gradient(135deg, #6b21a8, #8e44ad);
      color: white;
      padding: 1rem 1.5rem;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border-bottom: 3px solid #5a1a90;
    }
    .header .user-info {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      margin-bottom: 0.5rem;
      transition: color 0.3s;
    }
    .header .user-info:hover {
      color: #ddd;
    }
    .header .user-photo {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      margin-right: 0.5rem;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.3s;
      border: 2px solid #ffffff;
    }
    .header .user-photo:hover {
      transform: scale(1.15);
    }
    .header .balance-container {
      display: flex;
      justify-content: center;
      align-items: baseline;
      font-size: 1.5rem;
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
    }
    .header .balance {
      margin-right: 0.5rem;
    }
    .header .currency {
      font-size: 0.75rem;
      background: rgba(255, 255, 255, 0.2);
      padding: 0.15rem 0.4rem;
      border-radius: 8px;
      display: flex;
      align-items: center;
    }
    .header .currency img {
      width: 12px;
      height: 12px;
      margin-right: 0.2rem;
    }
    .content {
      flex-grow: 1;
      padding: 1rem 1rem;
      overflow-y: auto;
    }
    .description-section {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border: 3px solid #6b21a8;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .description-section:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 18px rgba(107, 33, 168, 0.3);
    }
    .description-section p {
      font-size: 0.9rem;
      color: #444;
      margin-bottom: 1rem;
    }
    .banner-section {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      text-align: center;
      border: 3px solid #6b21a8;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .banner-section:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 18px rgba(107, 33, 168, 0.3);
    }
    .banner-section img {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      border-radius: 8px;
    }
    .form-section {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      animation: fadeIn 0.5s ease-in;
      border: 3px solid #6b21a8;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .form-section:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 18px rgba(107, 33, 168, 0.3);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .form-group {
      margin-bottom: 1rem;
      position: relative;
    }
    .form-group label {
      display: block;
      font-size: 0.9rem;
      color: #444;
      margin-bottom: 0.4rem;
      font-weight: 500;
    }
    .form-group select, .form-group input {
      width: 100%;
      padding: 0.6rem;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.9rem;
      transition: border-color 0.3s, box-shadow 0.3s;
      min-height: 44px; /* Ensure touch-friendly size */
    }
    .form-group select:focus, .form-group input:focus {
      outline: none;
      border-color: #6b21a8;
      box-shadow: 0 0 6px rgba(107, 33, 168, 0.3);
    }
    .form-group .invalid {
      border-color: #ef4444;
    }
    .form-group .checkmark {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #10b981;
      font-size: 1.2rem;
      display: none;
    }
    .form-group.verified .checkmark {
      display: block;
    }
    .form-group .error {
      color: #ef4444;
      font-size: 0.8rem;
      margin-top: 0.2rem;
      display: none;
    }
    .form-group.invalid .error {
      display: block;
    }
    .submit-btn {
      background: linear-gradient(135deg, #6b21a8, #8e44ad);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      width: 100%;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      margin-top: 0.75rem;
      min-height: 48px; /* Ensure touch-friendly size */
      font-family: 'Poppins', sans-serif;
    }
    .submit-btn:hover {
      background: linear-gradient(135deg, #5a1a90, #7d3aa5);
      transform: translateY(-2px);
    }
    .submit-btn.hidden {
      display: none;
    }
    .giftcards-section {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border: 3px solid #6b21a8;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .giftcards-section:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 18px rgba(107, 33, 168, 0.3);
    }
    .giftcard-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      background: linear-gradient(135deg, #f9fafb, #f3e8ff);
      border-radius: 8px;
      margin-bottom: 0.5rem;
      transition: transform 0.2s ease;
    }
    .giftcard-item:hover {
      transform: scale(1.02);
    }
    .giftcard-item:last-child {
      margin-bottom: 0;
    }
    .giftcard-item .details {
      display: flex;
      align-items: center;
    }
    .giftcard-item .icon {
      width: 40px;
      height: 40px;
      background: #6b21a8;
      border-radius: 50%;
      margin-right: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      font-weight: 600;
      color: white;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }
    .giftcard-item .amount {
      font-weight: 500;
      color: #10b981;
      font-family: 'Poppins', sans-serif;
    }
    .giftcard-item .status {
      font-size: 0.8rem;
      margin-left: 0.5rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-weight: 500;
    }
    .giftcard-item .status.active {
      background: #10b981;
      color: white;
    }
    .giftcard-item .status.used {
      background: #ef4444;
      color: white;
    }
    .giftcard-item .serial-container {
      position: relative;
      display: flex;
      align-items: center;
    }
    .giftcard-item .copy-btn {
      background: #6b21a8;
      color: white;
      border: none;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      margin-left: 0.5rem;
      transition: background 0.3s, transform 0.2s;
      font-family: 'Roboto', sans-serif;
    }
    .giftcard-item .copy-btn:hover {
      background: #5a1a90;
      transform: translateY(-1px);
    }
    .giftcard-item .copy-tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      font-size: 0.75rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      display: none;
      white-space: nowrap;
      z-index: 10;
    }
    .giftcard-item .copy-tooltip.active {
      display: block;
    }
    .giftcard-item .copy-tooltip.error {
      background: #ef4444;
    }
    .footer {
      background: #6b21a8;
      padding: 0.5rem;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
    }
    .footer a {
      color: white;
      text-decoration: none;
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: color 0.3s, transform 0.2s;
      padding: 0.5rem;
    }
    .footer a:hover {
      color: #bbd0ff;
      transform: scale(1.1);
    }
    .footer .icon {
      font-size: 1.2rem;
      margin-bottom: 0.2rem;
    }
    /* Popup Styles */
    .popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .popup-content {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 90%;
      width: 300px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      animation: popupFadeIn 0.3s ease-in;
      border: 3px solid #6b21a8;
    }
    @keyframes popupFadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    .popup-content h3 {
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
      font-family: 'Poppins', sans-serif;
    }
    .popup-content.success h3 {
      color: #10b981;
    }
    .popup-content.error h3 {
      color: #ef4444;
    }
    .popup-content p {
      color: #444;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    .popup-content .cancel-btn {
      background: #6b21a8;
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      min-height: 44px; /* Ensure touch-friendly size */
      font-family: 'Poppins', sans-serif;
    }
    .popup-content .cancel-btn:hover {
      background: #5a1a90;
      transform: translateY(-2px);
    }
    @media (max-width: 640px) {
      .header {
        padding: 0.75rem 1rem;
      }
      .header .balance-container {
        font-size: 1.25rem;
      }
      .header .currency {
        font-size: 0.7rem;
      }
      .content {
        padding: 0.75rem;
      }
      .description-section, .banner-section, .form-section, .giftcards-section {
        padding: 0.75rem;
      }
      .form-group label {
        font-size: 0.85rem;
      }
      .form-group select, .form-group input {
        font-size: 0.85rem;
        padding: 0.5rem;
      }
      .submit-btn {
        font-size: 0.9rem;
        padding: 0.6rem 1.2rem;
      }
      .giftcard-item {
        font-size: 0.85rem;
      }
      .giftcard-item .icon {
        width: 35px;
        height: 35px;
        font-size: 1rem;
      }
      .giftcard-item .copy-btn {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
      }
      .footer a {
        font-size: 0.7rem;
        padding: 0.4rem;
      }
      .footer .icon {
        font-size: 1.1rem;
      }
      .banner-section img {
        max-height: 150px;
      }
    }
  </style>
</head>
<body class="flex flex-col">
  <!-- Header -->
  <header class="header">
    <div class="user-info">
      <a href="profile.html"><img src="https://i.pravatar.cc/35?img=3" alt="Hakan Celik" class="user-photo"></a>
      <span>Hi, Hakan Celik üëã</span>
    </div>
    <div class="balance-container">
      <div class="balance" id="balance">‚Ç∫543,433.65</div>
      <div class="currency">
        <img src="https://flagcdn.com/w14/tr.png" alt="Turkish Flag"> TRY
      </div>
    </div>
  </header>

  <!-- Content -->
  <div class="content">
    <div class="description-section">
      <h3 class="text-lg font-bold mb-2 font-poppins">Buy Gift Card üéÅ</h3>
      <p>This is the Buy Gift Card page where you can load a gift card with a desired amount from your balance. Select a gift card type (e.g., Amazon or Google Play), enter the amount in TRY, and confirm with your PIN. The amount will be deducted from your TRY balance, and the gift card will be loaded instantly.</p>
      <p>If your balance is low, add funds using USD üíµ or Crypto ‚Çø via the Add Balance page before proceeding.</p>
      <p>Note: Gift cards are non-refundable and subject to terms of the provider. Enjoy gifting! üéâ</p>
    </div>
    <div class="banner-section">
      <h3 class="text-lg font-bold mb-2 font-poppins">Gift Card Offers üéÅ</h3>
      <img src="https://images.unsplash.com/photo-1607082348529-40b867df19d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80" alt="Gift Card Banner" />
    </div>
    <div class="form-section">
      <h2 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 font-poppins">Load Gift Card üí≥</h2>
      <form id="giftCardForm">
        <div class="form-group">
          <label for="gift-card-type">Gift Card Type üéüÔ∏è</label>
          <select id="gift-card-type" name="gift-card-type" required>
            <option value="">Select a gift card</option>
            <option value="amazon">Amazon <img class="bank-logo" src="https://i.ibb.co/7z4fJ6f/amazon-logo.png" alt="Amazon Logo"></option>
            <option value="google-play">Google Play <img class="bank-logo" src="https://i.ibb.co/7z4fJ6f/google-play-logo.png" alt="Google Play Logo"></option>
            <option value="itunes">iTunes <img class="bank-logo" src="https://i.ibb.co/7z4fJ6f/itunes-logo.png" alt="iTunes Logo"></option>
            <option value="steam">Steam <img class="bank-logo" src="https://i.ibb.co/7z4fJ6f/steam-logo.png" alt="Steam Logo"></option>
          </select>
        </div>
        <div class="form-group">
          <label for="amount">Amount to Load (TRY) üí∞</label>
          <input type="number" id="amount" name="amount" placeholder="Enter amount" step="0.01" min="1" required>
          <span class="error">Please enter a valid amount</span>
          <span class="balance-info" id="balance-info">Available Balance: ‚Ç∫543,433.65</span>
        </div>
        <div class="form-group">
          <label for="pin">4-Digit PIN üîê</label>
          <input type="password" id="pin" name="pin" placeholder="Enter 4-digit PIN" maxlength="4" pattern="\d{4}" required>
          <span class="error">Invalid PIN</span>
        </div>
        <button type="button" id="proceed-btn" class="submit-btn hidden">Proceed to Buy üéÅ</button>
      </form>
    </div>
    <div class="giftcards-section" id="giftcards-section">
      <h3 class="text-lg font-bold mb-2 font-poppins">Gift Cards Available üéÅ</h3>
      <div id="giftcard-list"></div>
    </div>
  </div>

  <!-- Success Popup -->
  <div class="popup" id="successPopup">
    <div class="popup-content success">
      <h3>Gift Card Purchased üéâ</h3>
      <p id="success-message">Gift card loaded successfully!</p>
      <button class="cancel-btn" id="closeSuccessPopup">Close</button>
    </div>
  </div>

  <!-- Error Popup -->
  <div class="popup" id="errorPopup">
    <div class="popup-content error">
      <h3>Transaction Failed üö´</h3>
      <p>Unable to buy gift card, please try again or visit your bank branch.</p>
      <button class="cancel-btn" id="cancelPopup">Cancel</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <a href="home.html" class="details">
      <span class="icon">üè†</span>
      <span>Home</span>
    </a>
    <a href="pay.html" class="details">
      <span class="icon">üí∏</span>
      <span>Pay</span>
    </a>
    <a href="invest.html" class="details">
      <span class="icon">üìà</span>
      <span>Invest</span>
    </a>
    <a href="cards.html" class="details">
      <span class="icon">üí≥</span>
      <span>Cards</span>
    </a>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('giftCardForm');
      const giftCardType = document.getElementById('gift-card-type');
      const amount = document.getElementById('amount');
      const pin = document.getElementById('pin');
      const proceedBtn = document.getElementById('proceed-btn');
      const successPopup = document.getElementById('successPopup');
      const errorPopup = document.getElementById('errorPopup');
      const closeSuccessPopup = document.getElementById('closeSuccessPopup');
      const cancelPopup = document.getElementById('cancelPopup');
      const amountError = amount.parentElement.querySelector('.error');
      const pinError = pin.parentElement.querySelector('.error');
      const balanceDisplay = document.getElementById('balance');
      const balanceInfo = document.getElementById('balance-info');
      const giftCardList = document.getElementById('giftcard-list');

      // Mock current balance and gift cards array
      let currentBalance = 543433.65;
      let giftCards = [];

      // Function to generate a random 16-character serial number
      function generateSerialNumber() {
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        let serial = '';
        for (let i = 0; i < 16; i++) {
          serial += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return serial;
      }

      // Function to format gift card type for display
      function formatGiftCardType(type) {
        return type.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
      }

      // Function to mark gift card as used after 60 seconds (for testing; change to 3600000 for 1 hour)
      function markAsUsed(cardIndex) {
        setTimeout(() => {
          giftCards[cardIndex].status = 'used';
          updateGiftCardList();
        }, 60000); // 60 seconds
      }

      // Function to copy serial number to clipboard
      function copyToClipboard(serial, button) {
        const tooltip = button.nextElementSibling;
        // Try navigator.clipboard first
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard.writeText(serial).then(() => {
            tooltip.textContent = 'Copied!';
            tooltip.classList.remove('error');
            tooltip.classList.add('active');
            setTimeout(() => {
              tooltip.classList.remove('active');
            }, 2000);
          }).catch(() => {
            // Fallback to document.execCommand
            tryFallbackCopy(serial, tooltip);
          });
        } else {
          // Fallback for non-secure contexts or unsupported browsers
          tryFallbackCopy(serial, tooltip);
        }
      }

      // Fallback copy function using document.execCommand
      function tryFallbackCopy(serial, tooltip) {
        const textArea = document.createElement('textarea');
        textArea.value = serial;
        textArea.style.position = 'fixed';
        textArea.style.opacity = '0';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          const success = document.execCommand('copy');
          document.body.removeChild(textArea);
          if (success) {
            tooltip.textContent = 'Copied!';
            tooltip.classList.remove('error');
            tooltip.classList.add('active');
            setTimeout(() => {
              tooltip.classList.remove('active');
            }, 2000);
          } else {
            throw new Error('Fallback copy failed');
          }
        } catch (err) {
          document.body.removeChild(textArea);
          tooltip.textContent = 'Copy Failed';
          tooltip.classList.add('error', 'active');
          setTimeout(() => {
            tooltip.classList.remove('active');
          }, 2000);
          console.error('Failed to copy: ', err);
        }
      }

      // Function to update gift card list
      function updateGiftCardList() {
        giftCardList.innerHTML = '';
        if (giftCards.length === 0) {
          giftCardList.innerHTML = '<p class="text-sm text-gray-500">No gift cards available.</p>';
          return;
        }
        giftCards.forEach((card, index) => {
          const cardItem = document.createElement('div');
          cardItem.className = 'giftcard-item';
          cardItem.innerHTML = `
            <div class="details">
              <div class="icon">${card.type.charAt(0).toUpperCase()}</div>
              <div>
                <div class="name">${formatGiftCardType(card.type)} üéüÔ∏è</div>
              </div>
            </div>
            <div>
              <span class="amount">‚Ç∫${card.amount.toFixed(2)}</span>
              <span class="status ${card.status}">${card.status.toUpperCase()}</span>
              <div class="serial-container">
                <span class="text-sm text-gray-500">Serial: ${card.serial}</span>
                <button class="copy-btn" data-serial="${card.serial}">Copy</button>
                <span class="copy-tooltip">Copied!</span>
              </div>
            </div>
          `;
          giftCardList.appendChild(cardItem);
          // Add event listener to copy button
          cardItem.querySelector('.copy-btn').addEventListener('click', function() {
            copyToClipboard(card.serial, this);
          });
        });
      }

      // Function to add a new gift card
      function addGiftCard(type, amountValue) {
        const serialNumber = generateSerialNumber();
        const newCard = {
          type: type,
          amount: amountValue,
          serial: serialNumber,
          status: 'active'
        };
        giftCards.unshift(newCard); // Add to top
        if (giftCards.length > 20) {
          giftCards = giftCards.slice(0, 20); // Limit to 20
        }
        updateGiftCardList();
        markAsUsed(0); // Mark the new card (now at index 0) as used after timeout
        return serialNumber;
      }

      // Function to check if all fields are filled
      function checkFieldsFilled() {
        return (
          giftCardType.value !== '' &&
          amount.value.trim() !== '' && amount.value > 0 &&
          pin.value.length === 4
        );
      }

      // Update balance display
      function updateBalanceDisplay() {
        balanceDisplay.textContent = `‚Ç∫${currentBalance.toFixed(2)}`;
        balanceInfo.textContent = `Available Balance: ‚Ç∫${currentBalance.toFixed(2)}`;
      }

      // Real-time validation for all fields
      [giftCardType, amount, pin].forEach(input => {
        input.addEventListener('input', () => {
          proceedBtn.classList.toggle('hidden', !checkFieldsFilled());
          amountError.style.display = 'none';
          amount.parentElement.classList.remove('invalid');
          pinError.style.display = 'none';
          pin.parentElement.classList.remove('invalid');
        });
      });

      // Proceed to buy button click
      proceedBtn.addEventListener('click', function() {
        if (pin.value === '8553') {
          if (amount.value <= 0) {
            amount.parentElement.classList.add('invalid');
            amountError.style.display = 'block';
            return;
          }
          if (amount.value > currentBalance) {
            amountError.textContent = 'Amount exceeds available balance';
            amount.parentElement.classList.add('invalid');
            amountError.style.display = 'block';
            return;
          }
          // Generate and add new gift card
          const serialNumber = addGiftCard(giftCardType.value, parseFloat(amount.value));
          // Update balance
          currentBalance -= parseFloat(amount.value);
          updateBalanceDisplay();
          // Show success popup
          document.getElementById('success-message').textContent = `Gift card loaded successfully! Serial: ${serialNumber}`;
          successPopup.style.display = 'flex';
        } else {
          pin.parentElement.classList.add('invalid');
          pinError.style.display = 'block';
        }
      });

      // Close success popup
      closeSuccessPopup.addEventListener('click', function() {
        successPopup.style.display = 'none';
        giftCardType.value = '';
        amount.value = '';
        pin.value = '';
        proceedBtn.classList.add('hidden');
        amountError.style.display = 'none';
        amount.parentElement.classList.remove('invalid');
        pinError.style.display = 'none';
        pin.parentElement.classList.remove('invalid');
      });

      // Cancel error popup
      cancelPopup.addEventListener('click', function() {
        errorPopup.style.display = 'none';
        giftCardType.value = '';
        amount.value = '';
        pin.value = '';
        proceedBtn.classList.add('hidden');
        amountError.style.display = 'none';
        amount.parentElement.classList.remove('invalid');
        pinError.style.display = 'none';
        pin.parentElement.classList.remove('invalid');
      });

      // Initialize with 20 used gift cards
      function initializeUsedGiftCards() {
        const types = ['amazon', 'google-play', 'itunes', 'steam'];
        for (let i = 0; i < 20; i++) {
          const randomType = types[Math.floor(Math.random() * types.length)];
          const randomAmount = (Math.random() * 100 + 10).toFixed(2);
          giftCards.push({
            type: randomType,
            amount: parseFloat(randomAmount),
            serial: generateSerialNumber(),
            status: 'used'
          });
        }
        updateGiftCardList();
      }

      // Initialize gift card list with used cards
      initializeUsedGiftCards();
    });
  </script>
</body>
</html>